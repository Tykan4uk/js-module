var S=Object.defineProperty;var N=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var g=(e,t,n)=>(N(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function c(e){const t=document.createElement(e.tag);return t.className=e.className,t.innerText=e.innerText??"",e.onclick!==null&&t.addEventListener("click",e.onclick),e.value!==null&&t.setAttribute("value",e.value),e.src!==null&&t.setAttribute("src",e.src),e.alt!==null&&t.setAttribute("alt",e.alt),t}class d{}g(d,"getListByPage",async(t,n)=>{const a=new URL("https://musicality-api.azurewebsites.net/Track/GetByPage");a.searchParams.set("page",t),a.searchParams.set("pageSize",n);const s=await fetch(a).catch(()=>{});return(s==null?void 0:s.ok)??!1?await(s==null?void 0:s.json()):{total:0}});const T=async(e=1)=>{const t=+(document.querySelector(".page-size-dropdown").value??"10");document.getElementById("music-list-loader").style.display="block";const n=await d.getListByPage(`${e}`,`${t}`);if(document.getElementById("music-list-loader").style.display="none",n.total>0){let a=(e-1)*t+1;document.querySelector(".list-header").style.display="flex",document.querySelector(".music-list").style.display="flex",n.tracks.forEach(i=>{m(i,a),a++});const s=Math.ceil(n.total/t);document.querySelector(".pagination").style.display="flex",y(e,s)}else document.getElementById("music-list-warning").style.display="flex"},l=async e=>{const t=+(document.querySelector(".page-size-dropdown").value??"10");document.querySelector(".music-list").innerHTML="",document.querySelector("#music-list-inner-loader").style.display="flex";const n=await d.getListByPage(`${e}`,`${t}`);if(document.querySelector("#music-list-inner-loader").style.display="none",document.querySelector(".pagination-pages").innerHTML='<span class="pagination-page">Page</span>',n.total>0){let a=(e-1)*t+1;n.tracks.forEach(i=>{m(i,a),a++});const s=Math.ceil(n.total/t);y(e,s)}else document.getElementById("music-list-warning").style.display="flex"},m=(e,t)=>{const n=c({tag:"div",className:"music-list-item"}),a=c({tag:"span",className:"music-list-item-number",innerText:`${t}.`}),s=c({tag:"span",className:"music-list-item-author",innerText:e.singer}),i=c({tag:"span",className:"music-list-item-title",innerText:e.title}),r=c({tag:"span",className:"music-list-item-genre",innerText:e.genre}),p=c({tag:"div",className:"music-list-item-play-button"}),f=c({tag:"span",className:"music-list-item-play-button-play",innerText:"▶"});p.append(f);const h=c({tag:"div",className:"music-list-item-check-button",innerText:"Need check"});n.append(a,s,i,r,p,h),document.querySelector(".music-list").append(n)},y=(e,t)=>{if(e!==1&&q(e),t<8)for(let n=1;n<=t;n++)o(n,n===e);else if(e>5){if(o(1),u(),o(e-2),o(e-1),o(e,!0),e<=t-5&&(o(e+1),o(e+2),u(),o(t)),e>t-5)for(let n=e+1;n<=t;n++)o(n,n===e)}else{for(let n=1;n<8;n++)o(n,n===e);u(),o(t)}e!==t&&x(e,t)},o=(e,t=!1)=>{const n=c({tag:"span",className:t?"pagination-page-active":"pagination-page-button",innerText:`${e}`,onclick:t?void 0:()=>{l(e)}});document.querySelector(".pagination-pages").append(n)},q=e=>{const t=c({tag:"span",className:"pagination-page-first",innerText:"«",onclick:()=>{l(1)}}),n=c({tag:"span",className:"pagination-page-prev",innerText:"‹",onclick:()=>{l(e-1)}});document.querySelector(".pagination-pages").append(t,n)},x=(e,t)=>{const n=c({tag:"span",className:"pagination-page-next",innerText:"›",onclick:()=>{l(e+1)}}),a=c({tag:"span",className:"pagination-page-last",innerText:"»",onclick:()=>{l(t)}});document.querySelector(".pagination-pages").append(n,a)},u=()=>{const e=c({tag:"span",className:"pagination-page-dotes",innerText:"..."});document.querySelector(".pagination-pages").append(e)};T();document.querySelector(".page-size-dropdown").addEventListener("change",()=>l(1));
